### DNS、CDN和多活架构



#### DNS和CDN



DNS（Domain Name System，域名系统），DNS 服务用于在网络请求时，将域名转为 IP 地址。能够使用户更方便的访问互联网，而不用去记住能够被机器直接读取的 IP 数串。

传统的基于 UDP 协议的公共 DNS 服务极易发生 DNS 劫持，从而造成安全问题。

![image](https://github.com/lecc2cc/microgo/blob/master/images/11-1-2021-06-28-23.png?raw=true)

#### 查询方式

**递归查询**

如果主机所询问的本地域名服务器不知道被查询域名的 *IP* 地址，那么本地域名服务器就以 *DNS* 客户的身份，向其他根域名服务器继续发出查询请求报文，而不是让该主机自己进行下一步的查询。

**迭代查询**

当根域名服务器收到本地域名服务器发出的迭代查询请求报文时，要么给出所要查询的 *IP* 地址，要么告诉本地域名服务器：你下一步应当向哪一个域名服务器进行查询。然后让本地域名服务器进行后续的查询，而不是替本地域名服务器进行后续的查询。

客户端到 *Local DNS* 服务器，*Local DNS* 与上级 *DNS* 服务器之间属于递归查询；*DNS* 服务器与根 *DNS* 服务器之前属于迭代查询。

